<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Semana 05 - Atividade JavaScript</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style_semana05.css">
    
</head>

<body>

    <nav>
        <!--
        <a href="index.html">Voltar</a>
-->
        <a href="semana01.html">Semana 01</a>
        <a href="semana02.html">Semana 02</a>
        <a href="semana03.html">Semana 03</a>
        <a href="semana04.html">Semana 04</a>
        <a href="semana05.html">Semana 05</a>

        <a href="semana06.html">Semana 06</a>
       <!--<a href="semana07.html">Semana 07</a>
        <a href="semana08.html">Semana 08</a>
        <a href="semana09.html">Semana 09</a>-->

    </nav>


    <section>
        <h2>Semana 05 - Atividade</h2>
        <p>Desenvolvendo um contador de pessoas c/ cantador de genero</p>
        <div id="resultado"></div>
    </section>


<!--  
        ------------------------------------------------------------------
-->
<!--  
        ------------------------------------------------------------------
-->



    <div id="app"></div>

    <script>
        // --- Dados iniciais ---
        let homens = 0;
        let mulheres = 0;

        // --- Fun√ß√£o helper para criar elementos com classe e texto ---
        function el(tag, options = {}) {
            const e = document.createElement(tag);
            if (options.id) e.id = options.id;
            if (options.className) e.className = options.className;
            if (options.text !== undefined) e.textContent = options.text;
            if (options.html !== undefined) e.innerHTML = options.html;
            return e;
        }

        // --- Construir a estrutura inteira dentro da div #app ---
        (function montarInterface() {
            const app = document.getElementById('app');

            // container principal
            const container = el('div', { id: 'contador' });

            // topo com t√≠tulo e bot√£o atualizar √† direita
            const topo = el('div', { className: 'topo' });
            const titulo = el('div', { className: 'titulo-total', text: 'Total de Pessoas' });
            const btnAtualizar = el('button', { className: 'btn-atualizar', text: 'Atualizar' });
            btnAtualizar.addEventListener('click', () => {
                // a√ß√£o de atualizar: recalcula e anima um pequeno flash
                atualizarDisplay();
                btnAtualizar.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.05)' }, { transform: 'scale(1)' }], { duration: 200 });
            });

            topo.appendChild(titulo);
            topo.appendChild(btnAtualizar);

            // valor total grande
            const valorTotal = el('div', { className: 'valor-total', id: 'valorTotal', text: '0' });

            // painel com dois cards: Homens e Mulheres
            const painel = el('div', { className: 'panel-pessoas' });

            // card homens
            const cardHomens = criarCardPessoa({
                tipo: 'Homens',
                icone: 'üë®',
                getQuantidade: () => homens,
                onAdd: () => { homens++; atualizarDisplay(); },
                onRemove: () => { if (homens > 0) homens--; atualizarDisplay(); }
            });

            // card mulheres
            const cardMulheres = criarCardPessoa({
                tipo: 'Mulheres',
                icone: 'üë©',
                getQuantidade: () => mulheres,
                onAdd: () => { mulheres++; atualizarDisplay(); },
                onRemove: () => { if (mulheres > 0) mulheres--; atualizarDisplay(); }
            });

            painel.appendChild(cardHomens);
            painel.appendChild(cardMulheres);

            container.appendChild(topo);
            container.appendChild(valorTotal);
            container.appendChild(painel);
            app.appendChild(container);

            // atualizar a interface inicial
            atualizarDisplay();
        })();

        // --- Fun√ß√£o que cria um card para homem/mulher (retorna elemento) ---
        function criarCardPessoa({ tipo, icone, getQuantidade, onAdd, onRemove }) {
            const card = el('div', { className: 'card' });

            const ic = el('div', { className: 'icone', text: icone });
            card.appendChild(ic);

            const botoes = el('div', { className: 'botoes-controle' });
            const btnAdd = el('button', { className: 'controle-btn', text: '+' });
            const btnRem = el('button', { className: 'controle-btn remover', text: '‚àí' });

            btnAdd.addEventListener('click', () => { onAdd(); pulse(btnAdd); });
            btnRem.addEventListener('click', () => { onRemove(); pulse(btnRem); });

            botoes.appendChild(btnRem);
            botoes.appendChild(btnAdd);
            card.appendChild(botoes);

            const descricao = el('div', { className: 'descricao' });
            const rotulo = el('div', { className: 'rotulo', text: tipo });
            const contadorNum = el('div', { className: 'contador-num', text: '0' }); // ser√° atualizado
            contadorNum.dataset.tipo = tipo; // refer√™ncia para atualiza√ß√£o
            descricao.appendChild(rotulo);
            descricao.appendChild(contadorNum);

            card.appendChild(descricao);
            return card;
        }

        // --- Atualiza todos os displays (total e cada contador) ---
        function atualizarDisplay() {
            const total = homens + mulheres;
            document.getElementById('valorTotal').textContent = total;

            // atualizar cada contador-num pelo data attribute
            const counters = document.querySelectorAll('.contador-num');
            counters.forEach(c => {
                if (c.dataset.tipo === 'Homens') c.textContent = String(homens);
                if (c.dataset.tipo === 'Mulheres') c.textContent = String(mulheres);
            });
        }

        // --- Pequena anima√ß√£o de pulso para feedback ---
        function pulse(elm) {
            elm.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.08)' }, { transform: 'scale(1)' }], { duration: 150 });
        }

        // --- Fim do script ---
    </script>



<!--  
        ------------------------------------------------------------------
-->
<!--  
        ------------------------------------------------------------------
-->



    <a href="index.html" class="btn1">Voltar - Pagina inicial</a>

    <footer>
        <p>Laborat√≥rio de Engenharia - ADS</p>
        <p>Aluno: brunoserra</p>
        <p>&copy; 2025 Todos os direitos reservados</p>
    </footer>

</body>

</html>